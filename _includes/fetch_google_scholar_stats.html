<!-- <script>
    $(document).ready(function () {
        {% if site.google_scholar_stats_use_cdn %}
        var gsDataBaseUrl = 'https://cdn.jsdelivr.net/gh/{{ site.repository }}@'
        {% else %}
        var gsDataBaseUrl = 'https://raw.githubusercontent.com/{{ site.repository }}/'
        {% endif %}
        $.getJSON(gsDataBaseUrl + "google-scholar-stats/gs_data.json", function (data) {
            var totalCitation = data['citedby']
            document.getElementById('total_cit').innerHTML = totalCitation;
            var citationEles = document.getElementsByClassName('show_paper_citations')
            Array.prototype.forEach.call(citationEles, element => {
                var paperId = element.getAttribute('data')
                var numCitations = data['publications'][paperId]['num_citations']
                element.innerHTML = '| Citations: ' + numCitations;
            });
            var citationBadges = document.getElementsByClassName('paper_citations_badges')
            Array.prototype.forEach.call(citationBadges, element => {
                var paperId = element.getAttribute('data')
                var numCitations = data['publications'][paperId]['num_citations']
                element.innerHTML = '<a href="https://scholar.google.com/citations?view_op=view_citation&citation_for_view=' + paperId + '" target="_blank"><img src="https://img.shields.io/badge/citations-' + numCitations +'-blue?style=social&logo=googlescholar"></a>';
            });
        });
    })
</script> -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        {% if site.google_scholar_stats_use_cdn %}
        var gsDataBaseUrl = 'https://cdn.jsdelivr.net/gh/{{ site.repository }}@'
        {% else %}
        var gsDataBaseUrl = 'https://raw.githubusercontent.com/{{ site.repository }}/'
        {% endif %}
        fetch(gsDataBaseUrl + "google-scholar-stats/gs_data.json")
            .then(function (resp) { return resp.json(); })
            .then(function (data) {
                var citationEles = document.getElementsByClassName('show_paper_citations')
                Array.prototype.forEach.call(citationEles, function (element) {
                    var paperId = element.getAttribute('data')
                    if (!paperId || !data.publications || !data.publications[paperId]) return;
                    var numCitations = data.publications[paperId].num_citations
                    element.innerHTML = '| Citations: ' + numCitations;
                });
                var allCitation = document.getElementsByClassName('all_citation_badges')
                Array.prototype.forEach.call(allCitation, function (element) {
                    var numCitations = data.citedby
                    element.href = '{{ site.author.googlescholar }}'
                    element.innerHTML = '<img src="https://img.shields.io/badge/Paper%20Citations-' + numCitations +'-blue?style=social&logo=googlescholar">'
                });
                var citationBadges = document.getElementsByClassName('paper_citations_badges')
                Array.prototype.forEach.call(citationBadges, function (element) {
                    var paperId = element.getAttribute('data')
                    if (!paperId || !data.publications || !data.publications[paperId]) return;
                    var numCitations = data.publications[paperId].num_citations
                    element.href = 'https://scholar.google.com/citations?view_op=view_citation&citation_for_view=' + paperId;
                    element.innerHTML = '<img src="https://img.shields.io/badge/citations-' + numCitations +'-blue?style=social&logo=googlescholar">'
                });
            })
            .catch(function () {});
    })
</script>
